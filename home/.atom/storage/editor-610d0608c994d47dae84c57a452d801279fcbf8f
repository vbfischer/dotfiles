{"mode":"editor","version":1,"windowDimensions":{"x":239,"y":22,"width":1201,"height":878},"syntax":{"deserializer":"Syntax","grammarOverridesByPath":{}},"project":{"path":"/Users/bryce/Library/Application Support/Alfred 2/Alfred.alfredpreferences/workflows/user.workflow.A1CB6385-0026-4310-A422-76EFC42644D9","buffers":[{"text":"#!/bin/bash\n\nVPREFS=\"${HOME}/Library/Caches/com.runningwithcrayons.Alfred-2/Workflow Data/\"\nNVPREFS=\"${HOME}/Library/Application Support/Alfred 2/Workflow Data/\"\n\nRESULTS=()\n\n################################################################################\n# Adds a result to the result array\n#\n# $1 uid\n# $2 arg\n# $3 title\n# $4 subtitle\n# $5 icon\n# $6 valid\n# $7 autocomplete\n###############################################################################\naddResult() {\n  RESULT=\"<item uid='$(xmlEncode \"$1\")' arg='$(xmlEncode \"$2\")' valid='$6' autocomplete='$7'><title>$(xmlEncode \"$3\")</title><subtitle>$(xmlEncode \"$4\")</subtitle><icon>$(xmlEncode \"$5\")</icon></item>\"\n  RESULTS+=(\"$RESULT\")\n}\n\n###############################################################################\n# Prints the feedback xml to stdout\n###############################################################################\ngetXMLResults() {\n  echo \"<?xml version='1.0'?><items>\"\n\n#  if [ \"${#string[@]}\" = \"0\" ]; then\n#    echo \"<item uid='oftask' arg='-' valid='no'><title>No results found</title><subtitle>Please try another search term</subtitle><icon></icon></item>\"\n#  fi\n\n  for R in ${RESULTS[*]}; do\n    echo \"$R\" | tr \"\\n\" \" \"\n  done\n\n  echo \"</items>\"\n}\n\n###############################################################################\n# Escapes XML special characters with their entities\n###############################################################################\nxmlEncode() {\n  echo \"$1\" | sed s/\"&\"/\"\\&amp;\"/ | sed s/\">\"/\"\\&gt;\"/ | sed s/\"<\"/\"\\&lt;\"/ | sed s/\"\\'\"/\"\\&apos;\"/ | sed s/\"\\\"\"/\"\\&quot;\"/\n}\n\n###############################################################################\n# Read the bundleid from the workflow's info.plist\n###############################################################################\ngetBundleId() {\n  /usr/libexec/PlistBuddy  -c \"Print :bundleid\" \"info.plist\"\n}\n\n###############################################################################\n# Get the workflow data dir\n###############################################################################\ngetDataDir() {\n  local BUNDLEID=$(getBundleId)\n  echo \"${NVPREFS}${BUNDLEID}\"\n}\n\n###############################################################################\n# Get the workflow cache dri\n###############################################################################\ngetCacheDir() {\n  local BUNDLEID=$(getBundleId)\n  echo \"${VPREFS}${BUNDLEID}\"\n}\n\n###############################################################################\n# Save key=value to the workflow properties\n#\n# $1 key\n# $2 value\n# $3 non-volatile 0/1\n# $4 filename (optional, filename will be \"settings\" if not specified)\n###############################################################################\nsetPref() {\n  local BUNDLEID=$(getBundleId)\n  if [ \"$3\" = \"0\" ]; then\n    local PREFDIR=\"${VPREFS}${BUNDLEID}\"\n  else\n    local PREFDIR=\"${NVPREFS}${BUNDLEID}\"\n  fi\n\n  if [ ! -d \"$PREFDIR\" ]; then\n    mkdir -p \"$PREFDIR\"\n  fi\n\n  if [ -z \"$4\" ]; then\n    local PREFFILE=\"${PREFDIR}/settings\"\n  else\n    local PREFFILE=\"${PREFDIR}/$4\"\n  fi\n\n  if [ ! -f \"$PREFFILE\" ]; then\n    touch \"$PREFFILE\"\n  fi\n\n  local KEY_EXISTS=$(grep -c \"$1=\" \"$PREFFILE\")\n  if [ \"$KEY_EXISTS\" = \"1\" ]; then\n    local TMP=$(grep -ve \"^$1\" \"$PREFFILE\")\n    echo \"$TMP\" > \"$PREFFILE\"\n  fi\n  echo \"$1=$2\" >> \"$PREFFILE\"\n  }\n\n###############################################################################\n# Read a value for a given key from the workflow preferences\n#\n# $1 key\n# $2 non-volatile 0/1\n# $3 filename (optional, filename will be \"settings\" if not specified)\n###############################################################################\ngetPref() {\n  local BUNDLEID=$(getBundleId)\n  if [ \"$2\" = \"0\" ]; then\n    local PREFDIR=\"${VPREFS}${BUNDLEID}\"\n  else\n    local PREFDIR=\"${NVPREFS}${BUNDLEID}\"\n  fi\n\n  if [ ! -d \"$PREFDIR\" ]; then\n    return\n  fi\n\n  if [ -z \"$3\" ]; then\n    local PREFFILE=\"${PREFDIR}/settings\"\n  else\n    local PREFFILE=\"${PREFDIR}/$3\"\n  fi\n\n  if [ ! -f \"$PREFFILE\" ]; then\n    return\n  fi\n\n  local VALUE=$(sed \"/^\\#/d\" \"$PREFFILE\" | grep \"$1\"  | tail -n 1 | cut -d \"=\" -f2-)\n  echo \"$VALUE\"\n}\n\ngetLang() {\n  defaults read .GlobalPreferences AppleLanguages | tr -d [:space:] | cut -c2-3\n}\n","markers":{"markers":{"1":{"id":1,"range":[[19,35],[19,35]],"tailed":false,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":22,"goalBufferRange":null},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[],"redoStack":[],"deserializer":"History"},"filePath":"/Users/bryce/Library/Application Support/Alfred 2/Alfred.alfredpreferences/workflows/user.workflow.A1CB6385-0026-4310-A422-76EFC42644D9/workflowHandler.sh","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"a104e44dcb029e4c9703c41951df27d91be8e971","deserializer":"TextBuffer"}],"deserializer":"Project"},"workspace":{"paneContainer":{"root":{"id":7,"items":[{"id":22,"softTabs":true,"displayBuffer":{"id":23,"softWrap":false,"editorWidthInChars":null,"scrollTop":0,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/bryce/Library/Application Support/Alfred 2/Alfred.alfredpreferences/workflows/user.workflow.A1CB6385-0026-4310-A422-76EFC42644D9/workflowHandler.sh","tabLength":2,"deserializer":"TokenizedBuffer"},"deserializer":"DisplayBuffer"},"deserializer":"Editor"},{"filePath":"/Users/bryce/Library/Application Support/Alfred 2/Alfred.alfredpreferences/workflows/user.workflow.A1CB6385-0026-4310-A422-76EFC42644D9/info.png","deserializer":"ImageEditor"},{"filePath":"/Users/bryce/Library/Application Support/Alfred 2/Alfred.alfredpreferences/workflows/user.workflow.A1CB6385-0026-4310-A422-76EFC42644D9/icon.png","deserializer":"ImageEditor"},{"filePath":"/Users/bryce/Library/Application Support/Alfred 2/Alfred.alfredpreferences/workflows/user.workflow.A1CB6385-0026-4310-A422-76EFC42644D9/del.png","deserializer":"ImageEditor"},{"filePath":"/Users/bryce/Library/Application Support/Alfred 2/Alfred.alfredpreferences/workflows/user.workflow.A1CB6385-0026-4310-A422-76EFC42644D9/add.png","deserializer":"ImageEditor"},{"filePath":"/Users/bryce/Library/Application Support/Alfred 2/Alfred.alfredpreferences/workflows/user.workflow.A1CB6385-0026-4310-A422-76EFC42644D9/D685AFDF-AED6-41BA-A80E-91593F161F8A.png","deserializer":"ImageEditor"},{"filePath":"/Users/bryce/Library/Application Support/Alfred 2/Alfred.alfredpreferences/workflows/user.workflow.A1CB6385-0026-4310-A422-76EFC42644D9/68588082-968F-48CF-8D3D-40BD183AF368.png","deserializer":"ImageEditor"},{"filePath":"/Users/bryce/Library/Application Support/Alfred 2/Alfred.alfredpreferences/workflows/user.workflow.A1CB6385-0026-4310-A422-76EFC42644D9/15A2D89F-ABA0-4170-8A95-71E3057E8F47.png","deserializer":"ImageEditor"},{"filePath":"/Users/bryce/Library/Application Support/Alfred 2/Alfred.alfredpreferences/workflows/user.workflow.A1CB6385-0026-4310-A422-76EFC42644D9/mail.png","deserializer":"ImageEditor"}],"activeItemUri":"/Users/bryce/Library/Application Support/Alfred 2/Alfred.alfredpreferences/workflows/user.workflow.A1CB6385-0026-4310-A422-76EFC42644D9/workflowHandler.sh","focused":false,"deserializer":"Pane"},"activePaneId":7,"deserializer":"PaneContainer","version":1},"fullScreen":false,"packagesWithActiveGrammars":["language-shellscript"],"deserializer":"Workspace"},"packageStates":{"coffee-lint":{"height":0},"command-logger":{"eventLog":{"editor:select-to-first-character-of-line":{"count":1,"name":"editor:select-to-first-character-of-line","lastRun":1407436728383},"core:copy":{"count":5,"name":"core:copy","lastRun":1407445249948},"core:move-left":{"count":1,"name":"core:move-left","lastRun":1407436773336},"editor:select-to-end-of-line":{"count":1,"name":"editor:select-to-end-of-line","lastRun":1407436773776}}},"local-history":{"localHistoryViewState":""},"fuzzy-finder":{"/Users/bryce/Library/Application Support/Alfred 2/Alfred.alfredpreferences/workflows/user.workflow.A1CB6385-0026-4310-A422-76EFC42644D9/workflowHandler.sh":1407445346906},"keybinding-resolver":{"attached":false},"metrics":{"sessionLength":24656715},"tree-view":{"directoryExpansionStates":{},"selectedPath":"/Users/bryce/Library/Application Support/Alfred 2/Alfred.alfredpreferences/workflows/user.workflow.A1CB6385-0026-4310-A422-76EFC42644D9/workflowHandler.sh","hasFocus":true,"attached":true,"scrollLeft":0,"scrollTop":0,"width":200}}}