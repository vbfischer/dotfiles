{"mode":"editor","version":1,"windowDimensions":{"x":239,"y":22,"width":1201,"height":878},"syntax":{"deserializer":"Syntax","grammarOverridesByPath":{}},"project":{"path":"/Users/bryce/Library/Application Support/Alfred 2/Alfred.alfredpreferences/workflows/user.workflow.BEDD0FB4-3799-4D86-866E-60CC0276EA7F","buffers":[{"text":"import sys\nimport os\nimport alfred\nimport helpers\nimport config\nimport itemlist\nimport tagview\nimport itemview\nimport smartcontent\nimport edit\nimport listmanager\nimport config_keys as ck\n\n\ndef process_todo_query(raw_query):\n    (tag_view_preferred, entered_tag, parse_info) = tagview.get_tag_state(raw_query)\n    if tag_view_preferred:\n        tagview.generate_view(raw_query, entered_tag, parse_info)\n    else:\n        itemview.generate_view(raw_query, parse_info)\n\ndef actionize(query):\n    if len(query) <= 0:\n        return\n    have_tag = helpers.is_tag(query)\n    have_todo = helpers.is_todo(query)\n\n    if not (have_tag or have_todo):\n        itemlist.save_todo(query)\n    elif have_todo:\n        _id = helpers.extract_todo_id(query)\n\n        # smart content is a bit rudimentary at the moment\n        if smartcontent.smartcontent_enabled():\n            smartcontent.perform_action(_id)\n        else:\n            itemlist.copy_todo_to_clipboard(_id)\n\n    elif have_tag:\n        config.put(ck.KEY_TAG_RECENT, \"#\"+helpers.extract_tag(query))\n\n\ndef toggle_pin(query):\n    if helpers.is_todo(query):\n        itemlist.toggle_pinned(helpers.extract_todo_id(query))\n\n\ndef toggle_done(query):\n    if helpers.is_todo(query):\n        itemlist.toggle_done(helpers.extract_todo_id(query))\n\n\ndef main():\n    (option, query) = alfred.args2()\n    option_actions = {\n        # Clearing items\n        '-c': lambda q: itemlist.clear_all_todos(),\n        '-ct': lambda q: itemlist.clear_todos(done=False),\n        '-cd': lambda q: itemlist.clear_todos(done=True),\n        # Processing query input\n        '-a': lambda q:\tactionize(q),\n        '-q': lambda q:\tprocess_todo_query(q),\n        '-r': lambda q:\titemlist.remove_item(q),\n        # Item toggles\n        '-p': lambda q:\ttoggle_pin(q),\n        '-d': lambda q:\ttoggle_done(q)\n    }\n    option_actions[option](query)\n    config.commit()\n\nif __name__ == \"__main__\":\n    main()\n","markers":{"markers":{"1":{"id":1,"range":[[0,0],[0,0]],"tailed":false,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":107},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[],"redoStack":[],"deserializer":"History"},"filePath":"/Users/bryce/Library/Application Support/Alfred 2/Alfred.alfredpreferences/workflows/user.workflow.BEDD0FB4-3799-4D86-866E-60CC0276EA7F/todo.py","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"5abb4a58f7c9daa4c731111b93db6c824b79137c","deserializer":"TextBuffer"}],"deserializer":"Project"},"workspace":{"paneContainer":{"root":{"id":7,"items":[{"id":107,"softTabs":true,"displayBuffer":{"id":108,"softWrap":false,"editorWidthInChars":null,"scrollTop":953,"scrollLeft":0,"tokenizedBuffer":{"bufferPath":"/Users/bryce/Library/Application Support/Alfred 2/Alfred.alfredpreferences/workflows/user.workflow.BEDD0FB4-3799-4D86-866E-60CC0276EA7F/todo.py","tabLength":2,"deserializer":"TokenizedBuffer"},"deserializer":"DisplayBuffer"},"deserializer":"Editor"}],"activeItemUri":"/Users/bryce/Library/Application Support/Alfred 2/Alfred.alfredpreferences/workflows/user.workflow.BEDD0FB4-3799-4D86-866E-60CC0276EA7F/todo.py","focused":true,"deserializer":"Pane"},"activePaneId":7,"deserializer":"PaneContainer","version":1},"fullScreen":false,"packagesWithActiveGrammars":["language-python"],"deserializer":"Workspace"},"packageStates":{"coffee-lint":{"height":0},"command-logger":{"eventLog":{}},"local-history":{"localHistoryViewState":""},"fuzzy-finder":{"/Users/bryce/Library/Application Support/Alfred 2/Alfred.alfredpreferences/workflows/user.workflow.BEDD0FB4-3799-4D86-866E-60CC0276EA7F/todo.py":1407434953273},"keybinding-resolver":{"attached":false},"metrics":{"sessionLength":10751},"tree-view":{"directoryExpansionStates":{},"selectedPath":"/Users/bryce/Library/Application Support/Alfred 2/Alfred.alfredpreferences/workflows/user.workflow.BEDD0FB4-3799-4D86-866E-60CC0276EA7F/todo.py","hasFocus":false,"attached":true,"scrollLeft":0,"scrollTop":0,"width":200}}}